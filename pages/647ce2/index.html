<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vite搭建多页面项目 | UzumakiItachi</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/my_blog_vuepress/img/favicon.ico">
    <meta name="description" content="UzumakiItachi">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/my_blog_vuepress/assets/css/0.styles.deaf85da.css" as="style"><link rel="preload" href="/my_blog_vuepress/assets/js/app.16e5f942.js" as="script"><link rel="preload" href="/my_blog_vuepress/assets/js/3.4389b75b.js" as="script"><link rel="preload" href="/my_blog_vuepress/assets/js/2.c583de1b.js" as="script"><link rel="preload" href="/my_blog_vuepress/assets/js/23.307bd0e8.js" as="script"><link rel="prefetch" href="/my_blog_vuepress/assets/js/1.dab656e4.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/10.2a201090.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/100.f1d55616.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/101.88d48c75.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/102.e85ad812.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/103.e59acf6d.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/104.707edf50.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/105.194878f3.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/106.1b649403.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/107.fd5ee327.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/108.599f2204.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/109.af1cd2cc.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/11.3316313e.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/110.c88de8da.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/111.c65f4d8a.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/112.d04d2105.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/113.4abd1d7e.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/114.87603b99.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/115.40083b4b.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/116.aeb95312.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/117.d33c48ea.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/118.d118e474.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/119.6d877db9.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/12.189ac887.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/120.58a20583.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/121.b7dbd215.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/122.0ef31e34.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/123.e5e8539b.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/124.c7a51986.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/125.3a6019b8.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/126.850e3a5e.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/127.de065d3a.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/128.97756818.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/129.9b4c65d1.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/13.ba17921c.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/130.e48f0031.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/131.3354fd86.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/132.fc7d372d.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/133.1411f001.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/134.0d9262a9.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/135.ec1d198e.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/136.71d2a60d.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/137.a9517b62.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/138.03e2e618.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/139.680634aa.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/14.ddb69123.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/140.e8a98974.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/141.ac35f52f.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/142.00a190f8.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/143.69cf2181.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/15.71f734c5.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/16.da0f1e95.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/17.8f7163da.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/18.59cea935.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/19.acb2b72f.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/20.76053971.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/21.bd66125a.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/22.28b5aae9.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/24.92ac8a1a.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/25.8ad414a0.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/26.cde1cc6e.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/27.5a84629b.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/28.f62717e5.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/29.7413f058.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/30.ad1f9daf.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/31.4bdc2361.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/32.209e3d62.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/33.9c1e9425.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/34.02af98fe.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/35.04b05443.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/36.a2f8d5c5.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/37.d58720a7.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/38.aff28f9f.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/39.020b94c4.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/4.f5833ec4.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/40.659e3f89.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/41.507d2f56.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/42.9a4afe42.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/43.36b576f4.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/44.2435baf6.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/45.cb8d0766.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/46.29ccc6d3.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/47.e448b67f.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/48.5ab18ba4.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/49.30a094e9.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/5.64d1cc62.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/50.f477830c.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/51.0e6b4e7e.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/52.0990247d.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/53.9e2d2bb9.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/54.199d9f13.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/55.68d64d76.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/56.a20af009.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/57.bfe25bf9.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/58.ae64b8ae.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/59.fdfcc580.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/6.3bb88dfb.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/60.e21a462a.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/61.364a700b.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/62.b2fa060e.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/63.f4fb0f89.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/64.bf33d81c.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/65.7b544206.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/66.237936d5.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/67.66d5269a.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/68.0d720e12.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/69.445405e6.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/70.9acb3612.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/71.90a3b99f.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/72.efaffb07.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/73.895fc039.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/74.d56d5809.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/75.2dd2827d.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/76.6f68fa41.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/77.64ef87a8.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/78.3728d76a.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/79.d5d540e3.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/80.3f93d12b.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/81.9dc06af0.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/82.2a622bf2.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/83.6c9748c7.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/84.60377c88.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/85.8ef0129f.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/86.dfde331d.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/87.db26ed8d.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/88.2096edfc.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/89.6e0a690c.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/9.a61a7ad0.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/90.fc2ce24c.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/91.e154a6c3.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/92.c22d0605.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/93.47d9e538.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/94.bf7fb944.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/95.7b7caebc.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/96.bd5d879d.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/97.700b21e6.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/98.73e630dc.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/99.f0b51789.js"><link rel="prefetch" href="/my_blog_vuepress/assets/js/vendors~docsearch.1930e619.js">
    <link rel="stylesheet" href="/my_blog_vuepress/assets/css/0.styles.deaf85da.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/my_blog_vuepress/" class="home-link router-link-active"><!----> <span class="site-name">UzumakiItachi</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/my_blog_vuepress/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/my_blog_vuepress/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/my_blog_vuepress/web/#JavaScript" class="nav-link">JavaSript</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><a href="/my_blog_vuepress/frame/" class="link-title">框架</a> <span class="title" style="display:none;">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Vue</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/my_blog_vuepress/frame/Vue2/" class="nav-link">Vue2</a></li><li class="dropdown-subitem"><a href="/my_blog_vuepress/frame/Vue3/" class="nav-link">Vue3</a></li></ul></li><li class="dropdown-item"><h4>React</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/my_blog_vuepress/frame/React/" class="nav-link">React_18</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/my_blog_vuepress/technology/" class="link-title">技术</a> <span class="title" style="display:none;">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/my_blog_vuepress/technology/#WebPack" class="nav-link">WebPack</a></li><li class="dropdown-item"><!----> <a href="/my_blog_vuepress/technology/#浏览器相关" class="nav-link">浏览器相关</a></li><li class="dropdown-item"><!----> <a href="/my_blog_vuepress/technology/#工程化相关" class="nav-link">工程化相关</a></li><li class="dropdown-item"><!----> <a href="/my_blog_vuepress/technology/#工作中遇到的问题以及解决方案" class="nav-link">工作中遇到的问题以及解决方案</a></li><li class="dropdown-item"><!----> <a href="/my_blog_vuepress/technology/#Git" class="nav-link">Git</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/my_blog_vuepress/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/my_blog_vuepress/more/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/my_blog_vuepress/more/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/my_blog_vuepress/more/" class="nav-link">心情杂货</a></li><li class="dropdown-item"><!----> <a href="/my_blog_vuepress/more/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/my_blog_vuepress/more/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/my_blog_vuepress/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="收藏" class="dropdown-title"><a href="/my_blog_vuepress/collect/" class="link-title">收藏</a> <span class="title" style="display:none;">收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/my_blog_vuepress/collect/#个人产出" class="nav-link">个人产出</a></li><li class="dropdown-item"><!----> <a href="/my_blog_vuepress/collect/#实用工具" class="nav-link">实用工具</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/my_blog_vuepress/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/my_blog_vuepress/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/my_blog_vuepress/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/my_blog_vuepress/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/hanhanbuku/my_blog_vuepress" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://pic.imgdb.cn/item/63fca046f144a01007247d23.jpg"> <div class="blogger-info"><h3>UzumakiItachi</h3> <span>起风了，唯有努力生存。</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/my_blog_vuepress/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/my_blog_vuepress/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/my_blog_vuepress/web/#JavaScript" class="nav-link">JavaSript</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><a href="/my_blog_vuepress/frame/" class="link-title">框架</a> <span class="title" style="display:none;">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Vue</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/my_blog_vuepress/frame/Vue2/" class="nav-link">Vue2</a></li><li class="dropdown-subitem"><a href="/my_blog_vuepress/frame/Vue3/" class="nav-link">Vue3</a></li></ul></li><li class="dropdown-item"><h4>React</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/my_blog_vuepress/frame/React/" class="nav-link">React_18</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/my_blog_vuepress/technology/" class="link-title">技术</a> <span class="title" style="display:none;">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/my_blog_vuepress/technology/#WebPack" class="nav-link">WebPack</a></li><li class="dropdown-item"><!----> <a href="/my_blog_vuepress/technology/#浏览器相关" class="nav-link">浏览器相关</a></li><li class="dropdown-item"><!----> <a href="/my_blog_vuepress/technology/#工程化相关" class="nav-link">工程化相关</a></li><li class="dropdown-item"><!----> <a href="/my_blog_vuepress/technology/#工作中遇到的问题以及解决方案" class="nav-link">工作中遇到的问题以及解决方案</a></li><li class="dropdown-item"><!----> <a href="/my_blog_vuepress/technology/#Git" class="nav-link">Git</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/my_blog_vuepress/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/my_blog_vuepress/more/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/my_blog_vuepress/more/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/my_blog_vuepress/more/" class="nav-link">心情杂货</a></li><li class="dropdown-item"><!----> <a href="/my_blog_vuepress/more/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/my_blog_vuepress/more/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/my_blog_vuepress/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="收藏" class="dropdown-title"><a href="/my_blog_vuepress/collect/" class="link-title">收藏</a> <span class="title" style="display:none;">收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/my_blog_vuepress/collect/#个人产出" class="nav-link">个人产出</a></li><li class="dropdown-item"><!----> <a href="/my_blog_vuepress/collect/#实用工具" class="nav-link">实用工具</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/my_blog_vuepress/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/my_blog_vuepress/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/my_blog_vuepress/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/my_blog_vuepress/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/hanhanbuku/my_blog_vuepress" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>WebPack</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>浏览器相关</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>工程化相关</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/my_blog_vuepress/pages/ec44bc/" class="sidebar-link">执行npm run dev的时候发生了什么</a></li><li><a href="/my_blog_vuepress/pages/69b843/" class="sidebar-link">仓库版本管理-standard-version</a></li><li><a href="/my_blog_vuepress/pages/92c5f3/" class="sidebar-link">git版本管理以及生成changelog</a></li><li><a href="/my_blog_vuepress/pages/59abc9/" class="sidebar-link">发布一个npm包</a></li><li><a href="/my_blog_vuepress/pages/00081a/" class="sidebar-link">gitlab runner 免密码登录服务器</a></li><li><a href="/my_blog_vuepress/pages/ab1d89/" class="sidebar-link">实现一个小程序持续集成工具</a></li><li><a href="/my_blog_vuepress/pages/deef6e/" class="sidebar-link">使用changeset管理monorepo项目</a></li><li><a href="/my_blog_vuepress/pages/7fefc4/" class="sidebar-link">pnpm+trubo打造一个极致丝滑的monorepo工程</a></li><li><a href="/my_blog_vuepress/pages/2b7df7/" class="sidebar-link">编写一个生成git提交信息的vite插件</a></li><li><a href="/my_blog_vuepress/pages/45f2b9/" class="sidebar-link">关于构建SPA项目的一些优化</a></li><li><a href="/my_blog_vuepress/pages/c897b2/" class="sidebar-link">实现一个简易的脚手架</a></li><li><a href="/my_blog_vuepress/pages/647ce2/" aria-current="page" class="active sidebar-link">vite搭建多页面项目</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/my_blog_vuepress/pages/647ce2/#前言" class="sidebar-link">前言</a></li><li class="sidebar-sub-header level2"><a href="/my_blog_vuepress/pages/647ce2/#什么是spa和mpa" class="sidebar-link">什么是SPA和MPA？</a></li><li class="sidebar-sub-header level2"><a href="/my_blog_vuepress/pages/647ce2/#需求场景分析" class="sidebar-link">需求场景分析</a></li><li class="sidebar-sub-header level2"><a href="/my_blog_vuepress/pages/647ce2/#开始" class="sidebar-link">开始</a></li><li class="sidebar-sub-header level2"><a href="/my_blog_vuepress/pages/647ce2/#vite-config-ts" class="sidebar-link">vite.config.ts</a></li><li class="sidebar-sub-header level2"><a href="/my_blog_vuepress/pages/647ce2/#产物的目录层级嵌套太深" class="sidebar-link">产物的目录层级嵌套太深</a></li><li class="sidebar-sub-header level2"><a href="/my_blog_vuepress/pages/647ce2/#nginx配置" class="sidebar-link">Nginx配置</a></li><li class="sidebar-sub-header level2"><a href="/my_blog_vuepress/pages/647ce2/#自动上传oss脚本" class="sidebar-link">自动上传oss脚本</a></li><li class="sidebar-sub-header level2"><a href="/my_blog_vuepress/pages/647ce2/#总结" class="sidebar-link">总结</a></li></ul></li><li><a href="/my_blog_vuepress/pages/da8778/" class="sidebar-link">实现一个可自定义模板内容的脚手架</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>工作中遇到的问题以及解决方案</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Git</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vite</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>一些小工具</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>服务器</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HTTP</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>一些新东西</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/my_blog_vuepress/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/my_blog_vuepress/technology/#技术" data-v-06225672>技术</a></li><li data-v-06225672><a href="/my_blog_vuepress/technology/#工程化相关" data-v-06225672>工程化相关</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/hanhanbuku/" target="_blank" title="作者" class="beLink" data-v-06225672>hanhanbuku</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2024-01-08</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">vite搭建多页面项目<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h2 id="前言"><a href="#前言" class="header-anchor">#</a> 前言</h2> <blockquote><p><code>SPA</code>和<code>MPA</code>是当下最常见的<code>Web</code>应用程序架构，他们分别的应用场景也有所不同。例如<code>B端</code>应用大多数都会采用<code>SPA</code>架构，而<code>C端</code>应用一般都会采用<code>MPA</code>架构。现有的热门的构建工具大多数默认创建的<code>SPA</code>架构的应用，本文将介绍一下如何通过<code>vite</code>构建一个多页面应用。</p></blockquote> <h2 id="什么是spa和mpa"><a href="#什么是spa和mpa" class="header-anchor">#</a> 什么是SPA和MPA？</h2> <p>首先介绍一下到底什么是<code>SPA</code>，什么是<code>MPA</code>？</p> <ul><li><p><code>SPA</code>：全称为<code>Single-Page Application</code>，翻译过来就是<code>单页面应用程序</code>。所谓单页面应用程序就是所有的<code>HTML、CSS和JavaScript</code>都会在初始加载时被下载到浏览器，然后通过<code>AJAX</code>或<code>WebSocket</code>等技术与服务器进行数据交互，从而实现动态加载内容而无需重新加载整个页面。也就是说，<code>html</code>至始至终都只有一个，框架通过自己实现的前端路由来控制每个页面的切换。这种架构的程序通过牺牲一点初始化加载时间来换取更丝滑的交互，以及减轻服务器的压力，给用户更好的体验。</p></li> <li><p><code>MPA</code>：全称为<code>Multi-Page Application</code>，翻译过来就是<code>多页面应用程序</code>。这种架构就像字面意思一样，每个页面都是一个独立的<code>html</code>，切换页面需要像服务器重新请求这个页面所有的资源，在交互上体验会不太好。但是他的优点就是渲染<code>速度快</code>，因为每个页面只需要加载自己的内容就行了。所以速度会比<code>SPA</code>架构的程序<code>快</code>上很多，当然服务器的压力也会逐渐<code>增大</code>。</p></li></ul> <p>两种架构各有利有弊，他们的使用场景也分别不同。</p> <p>更多的本文就不过多赘述了，下面来介绍文章主要内容，如何通过<code>vite</code>构建一个多页面应用程序。</p> <h2 id="需求场景分析"><a href="#需求场景分析" class="header-anchor">#</a> 需求场景分析</h2> <p>在日常开发过程中，会遇到很多临时的页面，如活动营销，工具页等。诸如此类的页面将他写入一个<code>SPA</code>的系统中肯定是不合适的，因为他们使用频率并不多，并且互相没有任何关联，各自有各自的作用。但如果把每一个页面都写成一个项目的话，又会出现很多重复劳动，例如项目的架构是相同的，一些通用的工具也是相同的，这些页面只是在业务场景上没有关联，但是从开发角度来讲，就可以把他们糅合进同一个项目中。所以这里就需要将他们构建成多页面应用了。</p> <h2 id="开始"><a href="#开始" class="header-anchor">#</a> 开始</h2> <p>首先搭建一个<code>vite</code>项目</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">pnpm</span> create vite
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>选择自己喜好的框架，配置等，搭建一个基本的<code>SPA</code>项目。</p> <p>然后删除<code>src</code>目录下所有内容，这些我们都用不到，我们只需要这么一个壳子就可以了，真正的项目我们将他写入<code>src/pages</code>目录下。</p> <p>在<code>src</code>下新建<code>pages</code>目录，并<code>cd</code>进入其中，再次运行上述脚本新建一个项目，并删除里面一些不需要的东西。</p> <p>此时我们的文件目录大概长如下样子</p> <p><img src="/my_blog_vuepress/assets/img/gc_6.f9d844ef.png" alt="img.png"></p> <p>用红线划掉的先不用在意，子项目里只需要存在他自己的组件和入口文件以及他的<code>html</code>就行了。像一些构建相关的配置，项目规范的一些东西他都不需要要，直接公用父级的就可以。</p> <p>重点来了！</p> <h2 id="vite-config-ts"><a href="#vite-config-ts" class="header-anchor">#</a> vite.config.ts</h2> <p>先来看看<code>vite</code> 文档提供的构建多页面应用的配置</p> <p><img src="/my_blog_vuepress/assets/img/gc_7.a19ee4da.png" alt="img.png"></p> <p>文档中提供的目录结构在我看来是不太合理的，子项目一多难以管理。建议这里还是参照我上面提供的文件目录结构，这里我们主要看一下他的构建配置。</p> <p>可以看到这里配置也非常简单，只需要再<code>rollup</code>的构建配置的<code>input</code>属性上加入每个子页面的名称，以及他们对应的<code>html</code>文件就可以了。</p> <p>所以此时我们的构建配置应该这样写</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  build<span class="token operator">:</span> <span class="token punctuation">{</span>
    outDir<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    rollupOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
      input<span class="token operator">:</span> <span class="token punctuation">{</span>
          download_landing<span class="token operator">:</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">src/pages/download-landing/index.html</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    alias<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">'@'</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  server<span class="token operator">:</span> <span class="token punctuation">{</span>
    port<span class="token operator">:</span> <span class="token number">5175</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>在配置上其实就是将原来的<code>单入口</code>改为了<code>多入口</code>，那么如果我们有很多子项目，每次都要手动的去新增入口配置显然是不合理的。所以这里需要写一个脚本来动态的获取所有子项目并生成多入口的配置</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code>
<span class="token keyword">const</span> <span class="token function-variable function">generatePagesConfig</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> pagesDir <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src/pages'</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> subdirectories <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readdirSync</span><span class="token punctuation">(</span>pagesDir<span class="token punctuation">,</span> <span class="token punctuation">{</span> withFileTypes<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>dir <span class="token operator">=&gt;</span> dir<span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>dir <span class="token operator">=&gt;</span> dir<span class="token punctuation">.</span>name<span class="token punctuation">)</span>

  <span class="token keyword">return</span> subdirectories<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>pagesConfig<span class="token punctuation">,</span> directory<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    pagesConfig<span class="token punctuation">[</span>directory<span class="token punctuation">]</span> <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">src/pages/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>directory<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/index.html</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> pagesConfig
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>在此方法中我们读取了<code>src/pages</code>目录下所有子目录的名字，并将这些目录一一生成入口配置，然后返回。此时我们的配置就可以直接调用这个方法来动态获取所有子项目啦</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  build<span class="token operator">:</span> <span class="token punctuation">{</span>
    outDir<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    rollupOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
      input<span class="token operator">:</span> <span class="token function">generatePagesConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    alias<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">'@'</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  server<span class="token operator">:</span> <span class="token punctuation">{</span>
    port<span class="token operator">:</span> <span class="token number">5175</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>写到这里，其实我们的多页面应用就已经搭建完成了。但是他还有一些不足的地方我们还需再改进一下。</p> <h2 id="产物的目录层级嵌套太深"><a href="#产物的目录层级嵌套太深" class="header-anchor">#</a> 产物的目录层级嵌套太深</h2> <p>先来看看通过上述配置构建出来的产物是什么样的</p> <p><img src="data:image/png;base64,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" alt="img.png"></p> <p>可以看到，连<code>src/pages</code>目录都生成出来了，这显然嵌套的有点太深了，不太好。我们需要改进一下，将<code>css</code>和<code>js</code>分离到自己的目录里</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code>  build<span class="token operator">:</span> <span class="token punctuation">{</span>
    outDir<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    rollupOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
      input<span class="token operator">:</span> <span class="token function">generatePagesConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      output<span class="token operator">:</span> <span class="token punctuation">{</span>
        assetFileNames<span class="token operator">:</span> <span class="token string">'[ext]/[name]-[hash].[ext]'</span><span class="token punctuation">,</span> <span class="token comment">// 静态文件输出的文件夹名称</span>
        chunkFileNames<span class="token operator">:</span> <span class="token string">'js/[name]-[hash].js'</span><span class="token punctuation">,</span>  <span class="token comment">// chunk包输出的文件夹名称</span>
        entryFileNames<span class="token operator">:</span> <span class="token string">'js/[name]-[hash].js'</span><span class="token punctuation">,</span>  <span class="token comment">// 入口文件输出的文件夹名称</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>然后再修改一下<code>root</code>，来剔除多余的文件层级</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code>  root<span class="token operator">:</span> <span class="token string">'./src/pages/'</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>现在，配置文件内容如下</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  root<span class="token operator">:</span> <span class="token string">'./src/pages/'</span><span class="token punctuation">,</span>
  build<span class="token operator">:</span> <span class="token punctuation">{</span>
    outDir<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    rollupOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
      input<span class="token operator">:</span> <span class="token function">generatePagesConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      output<span class="token operator">:</span> <span class="token punctuation">{</span>
        assetFileNames<span class="token operator">:</span> <span class="token string">'[ext]/[name]-[hash].[ext]'</span><span class="token punctuation">,</span> <span class="token comment">// 静态文件输出的文件夹名称</span>
        chunkFileNames<span class="token operator">:</span> <span class="token string">'js/[name]-[hash].js'</span><span class="token punctuation">,</span>  <span class="token comment">// chunk包输出的文件夹名称</span>
        entryFileNames<span class="token operator">:</span> <span class="token string">'js/[name]-[hash].js'</span><span class="token punctuation">,</span>  <span class="token comment">// 入口文件输出的文件夹名称</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    alias<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">'@'</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  server<span class="token operator">:</span> <span class="token punctuation">{</span>
    port<span class="token operator">:</span> <span class="token number">5175</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>运行一下<code>build</code>，再来看看效果吧！</p> <p><img src="data:image/png;base64,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" alt="img.png"></p> <p>怎么样，结构是不是一下就清晰了。</p> <p>被我们这一波魔改之后，运行<code>dev</code>你会发现，根目录没有默认的<code>html</code>文件了，我们需要指定路劲才能访问到项目。这合理吗？不合理！怎么办，那就改！</p> <p>深思熟虑一波，我们可以提供一个导航页，来罗列出所有的子项目，然后你点哪个就进入到哪个子项目中咯。</p> <p>那通过什么实现呢？插件！插件！插件！</p> <p>学了那么久<code>vite</code>，<code>plugin</code>都学烂了，这不，就可以用上啦。</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token comment">// 开发环境生成所有子项目的入口</span>
<span class="token keyword">const</span> <span class="token function-variable function">previewHtmlPlugin</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function-variable function">Plugin</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> pagesDir <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src/pages'</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> subdirectories <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readdirSync</span><span class="token punctuation">(</span>pagesDir<span class="token punctuation">,</span> <span class="token punctuation">{</span> withFileTypes<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>dir <span class="token operator">=&gt;</span> dir<span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>dir <span class="token operator">=&gt;</span> dir<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
  <span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token string">''</span>

  subdirectories<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>d<span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    p <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div style=&quot;padding: 20px&quot;&gt;&lt;a href=&quot;/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>d<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/&quot; &gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>d<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/a&gt;&lt;/div&gt;</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'preview-html-plugin'</span><span class="token punctuation">,</span>
    enforce<span class="token operator">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span>
    <span class="token function">configureServer</span><span class="token punctuation">(</span><span class="token punctuation">{</span> middlewares <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      middlewares<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 拦截/路径</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>url <span class="token operator">===</span> <span class="token string">'/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> html <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
              &lt;!DOCTYPE html&gt;
              &lt;html&gt;
                &lt;head&gt;
                  &lt;title&gt;Custom HTML&lt;/title&gt;
                &lt;/head&gt;
                &lt;body&gt;
                </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>p<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
                &lt;/body&gt;
              &lt;/html&gt;
            </span><span class="token template-punctuation string">`</span></span>
          res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">,</span> <span class="token string">'text/html'</span><span class="token punctuation">)</span>
          res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><p>再剖析这个插件之前，先回顾一下，<code>vite</code>是怎么再开发环境下构建项目的？首先依赖<code>预构建</code>，然后<code>拦截</code>浏览器的请求，然后在编译出浏览器想要的东西返回给浏览器，那这一切是什么东西做的？对！就是<code>中间件</code>，我们要实现的这个插件也是通过中间件去拦截<code>/</code>路径，原本<code>vite</code>是返回根目录的<code>html</code>嘛，这里项目被魔改了，根目录没有<code>html</code>，那我们造一个给他不就是了。</p> <p>所以这个插件其实就做了一件事，拦截<code>/</code>路径的请求，然后生成一个临时的<code>html</code>返回给浏览器，这个临时的<code>html</code>里有所有的子项目的导航，点击哪个就会跳转到哪个子项目中。</p> <p>好了，一个好用的<code>vite</code>构建<code>MPA</code>的例子到这就差不多完工了。下面再提一下我遇到的特殊场景和解决办法。</p> <h2 id="nginx配置"><a href="#nginx配置" class="header-anchor">#</a> Nginx配置</h2> <p>由于这个项目是国外的服务器，国内访问有点慢，所以最终决定不把他部署再服务器上，而是部署在<code>oss</code>上。至于加速什么的，交给阿里云呗，关我什么事嘿嘿。</p> <p>我们要做的就是将某一个路径的请求全部代理到<code>oss</code>上，并且动态的获取子页面路径</p> <div class="language-text line-numbers-mode"><pre class="language-text"><code>server {
    listen 80;
    server_name example.com;

    location ~ /multi/(.*)$ {
        set $target $1;
        
        proxy_pass http://ossurl/$target;
    }

    # 其他 location 配置...
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>这里我们拦截<code>/multi</code>路径，并且将他后面的内容都作为变量填充的<code>oss</code>路径后面。以此来实现一个<code>location</code>块代理所有的子项目，这样就不需要每新增一个子项目就去新增一个<code>nginx</code>配置啦。</p> <h2 id="自动上传oss脚本"><a href="#自动上传oss脚本" class="header-anchor">#</a> 自动上传oss脚本</h2> <p>下面再贴一个把本地构建结果上传到oss上的脚本，这样后续只需要再build后执行一下这个脚本就能完成自动化部署啦</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 设置OSS连接信息</span>
<span class="token keyword">var</span> accessKeyId <span class="token operator">=</span> <span class="token string">'&lt;Your-Access-Key-ID&gt;'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> accessKeySecret <span class="token operator">=</span> <span class="token string">'&lt;Your-Access-Key-Secret&gt;'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> bucketName <span class="token operator">=</span> <span class="token string">'&lt;Your-Bucket-Name&gt;'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> endpoint <span class="token operator">=</span> <span class="token string">'&lt;Your-OSS-Endpoint&gt;'</span><span class="token punctuation">;</span>

<span class="token comment">// 创建OSS实例</span>
<span class="token keyword">var</span> ossClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OSS</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">accessKeyId</span><span class="token operator">:</span> accessKeyId<span class="token punctuation">,</span>
  <span class="token literal-property property">accessKeySecret</span><span class="token operator">:</span> accessKeySecret<span class="token punctuation">,</span>
  <span class="token literal-property property">bucket</span><span class="token operator">:</span> bucketName<span class="token punctuation">,</span>
  <span class="token literal-property property">region</span><span class="token operator">:</span> endpoint<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 递归遍历本地文件夹及其下文件和子文件夹，并逐个上传</span>
<span class="token keyword">function</span> <span class="token function">uploadFolder</span><span class="token punctuation">(</span><span class="token parameter">localFolderPath<span class="token punctuation">,</span> ossFolderPath</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 上传当前文件夹内的所有文件和子文件夹</span>
  fs<span class="token punctuation">.</span><span class="token function">readdirSync</span><span class="token punctuation">(</span>localFolderPath<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">file</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> localFilePath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>localFolderPath<span class="token punctuation">,</span> file<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 本地文件路径</span>
    <span class="token keyword">var</span> ossFilePath <span class="token operator">=</span> ossFolderPath <span class="token operator">+</span> <span class="token string">'/'</span> <span class="token operator">+</span> file<span class="token punctuation">;</span>  <span class="token comment">// OSS对象路径</span>

    <span class="token comment">// 判断是否为文件夹</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">lstatSync</span><span class="token punctuation">(</span>localFilePath<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 如果是文件夹，则递归上传</span>
      <span class="token function">uploadFolder</span><span class="token punctuation">(</span>localFilePath<span class="token punctuation">,</span> ossFilePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// 如果是文件，则上传至OSS，并设置相应的headers</span>
      <span class="token keyword">var</span> headers <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string-property property">'x-oss-object-acl'</span><span class="token operator">:</span> <span class="token string">'public-read'</span>  <span class="token comment">// 可选，设置文件的访问权限为公共读</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>

      ossClient<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>ossFilePath<span class="token punctuation">,</span> localFilePath<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">headers</span><span class="token operator">:</span> headers <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'上传成功：'</span> <span class="token operator">+</span> result<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'上传失败：'</span> <span class="token operator">+</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> localFolderPath <span class="token operator">=</span> <span class="token string">'&lt;Path-To-Local-Folder&gt;'</span><span class="token punctuation">;</span>  <span class="token comment">// 本地文件夹路径</span>
<span class="token keyword">var</span> ossFolderPath <span class="token operator">=</span> <span class="token string">'&lt;OSS-Folder-Path&gt;'</span><span class="token punctuation">;</span>  <span class="token comment">// OSS目标文件夹路径</span>

<span class="token function">uploadFolder</span><span class="token punctuation">(</span>localFolderPath<span class="token punctuation">,</span> ossFolderPath<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br></div></div><h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <blockquote><p>这里主要我想总结一下为什么这个应用场景要用<code>多页面</code>而不是<code>monorepo</code>架构。首先<code>monorepo</code>架构主要是一个仓库管理多个项目用的，每个项目会有自己一些<code>个性化</code>的配置，而这里的场景我们本质上还是打算将这些页面作为一个项目来开发，只不过是在构建上把他们构建成每一个<code>独立</code>的项目。对于开发过程而言，<code>pages</code>下其实就是一个个页面，完全可以不用把他当成是一个<code>独立</code>的项目，他们共用一份配置，共用一份依赖，共用一份工具，规范等等。把他构建成多页面是为了顺应一切从简，每个页面在应用上互相独立，不加载多余无用的资源。<code>monorepo</code>的理念显然和我们的不符，有些大材小用了，盲目的使用还会带来一些额外的开发负担，比如构建方面，部署方面等等。</p></blockquote></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://github.com/hanhanbuku/my_blog_vuepress/edit/master/docs/03.技术/03.工程化相关/12.vite搭建多页面项目.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2024/01/09, 16:01:20</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/my_blog_vuepress/pages/c897b2/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">实现一个简易的脚手架</div></a> <a href="/my_blog_vuepress/pages/da8778/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">实现一个可自定义模板内容的脚手架</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/my_blog_vuepress/pages/c897b2/" class="prev">实现一个简易的脚手架</a></span> <span class="next"><a href="/my_blog_vuepress/pages/da8778/">实现一个可自定义模板内容的脚手架</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/my_blog_vuepress/archives" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/my_blog_vuepress/pages/bb684e/"><div>
            SSE协议-由浅入深
            <!----></div></a> <span class="date">02-26</span></dt></dl><dl><dd>02</dd> <dt><a href="/my_blog_vuepress/pages/717d6a/"><div>
            简单易上手的SSG,SSR框架之Astro
            <!----></div></a> <span class="date">12-18</span></dt></dl><dl><dd>03</dd> <dt><a href="/my_blog_vuepress/pages/5df9f0/"><div>
            React如何获取最新状态
            <!----></div></a> <span class="date">12-03</span></dt></dl> <dl><dd></dd> <dt><a href="/my_blog_vuepress/archives" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:894072666@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/hanhanbuku/" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://gitee.com/wangyuhan123" title="Gitee" target="_blank" class="iconfont icon-gitee"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2023-2026
    <span>UzumakiItachi | <a href="https://github.com/xugaoyi/vuepress-theme-vdoing/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"><div></div><canvas id="vuepress-canvas-cursor"></canvas><!----><div></div></div></div>
    <script src="/my_blog_vuepress/assets/js/app.16e5f942.js" defer></script><script src="/my_blog_vuepress/assets/js/3.4389b75b.js" defer></script><script src="/my_blog_vuepress/assets/js/2.c583de1b.js" defer></script><script src="/my_blog_vuepress/assets/js/23.307bd0e8.js" defer></script>
  </body>
</html>
