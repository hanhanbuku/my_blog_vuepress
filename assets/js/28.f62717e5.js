(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{417:function(t,s){t.exports="data:image/png;base64,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"},418:function(t,s){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfMAAADkCAIAAAADyVqLAAAe5ElEQVR4Xu2de2wcx32ADSN/JpBix7Elx5L1smVblu5EShTp40sSJZISeXxJpEiaLz1Myw8xfkCOXMtuJCcxDNmJpTSJiyQuUqtAgbhO2gKtjMQFWrRIgRZt0RboH3kAKQq0RVC0aBOkSePuc252Zvd4e5y7Pe5+xAdiOTsz+9sl79vh7N38btqxc/yrP3z/Uzt3PbgrJ9i9e3ehsxsAIN0MDw/rhQ1IeSd/57UOhZs++OCDH3xtXNY6ZgeAjJAOs+vc5IzZVbnH7QUAYDWSWrN/8MEPv3rckrv1vTQhE7cXAACoHXGdfNNX3//6sZ27dhz/+nelYXvcXgAAoHbEdfJNn3o/MFrH7AAAjUZcJ9tPUL97IcTsfPHFF198rdKvm3ZceJ/3xgAAJMtD7Z1lsJycb9pTOTftOP71H7z/PGYHAEgQS98nph4OpRqzK07H7AAA9QezAwCkjdVn9s9efVPw4iuvT86d0uvotHWMX7x+4+pjXfounbaOx6/euPZoR1fbsZfevnH94jG7ldvDe++9V2EntcAJzIun/rQ9du3G9ZdGO5Y/unzdksKJ4UacgK0v55duX2Rv29376DX79y6XrBCrwxsVXx89nsanraN/8tz50yPlAq6kjlR59PT5M0PWb6d3+snz5yZ73Zek3cNzzz1XYSe1wAnMi6f+tI2cOX9uuifsD0Mx+8TC0guXL55bmF4dZneZW3xcr6awcrOPvnj9xrXlD1RTMHt5XAW7d19TZrd+726fBt1q3OzWr8YN8u0Xx/W9TieeBN2v844l/V3m3aRbWz+KXqcMoWbvmTp3/syoXrme6OdVTxrU7P0DxUN9/UqhVWKV65UFutmjkFtVZ3a50Ho1Rr1s6sYKzR7rIuhUbvakcIzp/eKqNruyy71bVH3RQoll9gpxbwBRf6LlNWop8skp9ZW4EkIPpxwltE4Uwuxy4dCZ82bDroIVmj3WRdCp3OwyNTf7lc+/8Ztfe0uWu7VtlVjlemWBbvAo5FaxpIbZQ1mtZtfGs64E5cKoMbv4J8D6cs9db6sgZu3sJtIvyz2EXXjtcWF2JUivMBiwHI+3HX1SoSE5e8sZxB4IRwiiOkIPpxwltE4UmD2UOpg919TWOTgVz+yux4XclR+j0A0ehdzKl1rpZSkEp79Wg7MxgVe4/AJTXlrBwzkKfsx7MduTAxEvRblQDjLUI163L3pdidkhYY33/PNSavpt/bMIE7TeiRKkaLjs2YnrpoehHtQ5ZVFuT3ldf2lkzGsud6UEo3dVCDO7W9n98rwZPKP35Kmb5cw+0v6Y3lY7o+AV0/5g/HLZ7NdFqIFtKeCg2eU6gYsTelmcvSEGETMbyl5hTEdbXrmQiFuozOr4Pdi7rGoH2/tEh85RrIqjylHkJm5v0q5SoRSJmI2xN6wg5Rj0JgqegkfsYNxjWWek1Nc7Uc5LOX2rjtftlNeVmB1yz9ot9K5DsKbf1j+LMEHrnShBioYhZ3dk8mXn64Wlkye82ZjnFqemJ6bOnjgzV6HZc/nCwWNz48N98cxekGw+NHqsEq0XVmb20svAGn7K6pGekdqvc7swYPaCNGYPbaIE6b8CHQ+6wzHHwqry1OMGg9Req163pa7cV/74xWueqYPnFVYzLFovhohORH3bm9L9ptzZBU5TDUM9tP+vQOk6yDYve8WUrnSzix9dR9t3ODVg+wpHmV009O6XYW2VGLR4SsPwwNWTzV66aP6d0h/4+3+NSmyl36a7bcej/bXIuIYq6cARUOBppCVu30pi/toqfPKcN4Xi6t7VSkmFVitPrHb/muhte56XhrTyUdQmpa4cSUnPSO1+NLOLkJxqIU3cowjcyD0POk6XLkKZ4yrnFTj9UrfB62m3OuOZOnheYTXDovViiOhEvgfL9xv57M5MHg0IPWD2MxWbvb3zYEdTvvmm3/vW77tUaPaCL/d33v12JVovrMzs0lDUl4g/2BRf/vA22uyRTeyXojTOkl9y6nZEJ8EgtdkPzW4lUSoP+kJryv0rAYd3EgxAUnDIGQXOLlLH4uKEXCv9xmC3EoVhV0xcGZcQs/vxu6dmNRHnKL4sU1do9tC2SgxCyl4F59TE0UWF4JhdNr56XLnc2/ZPStw5nG7tXfo18aOKNIhfwVOnvV0aF1v2GT1t+8Jq7pgo+O+/YkB1PH7G81H4UUKbSENp8eXfUaLNHtnEvpm5t5aguEO2IzoJBqnNfmj3g9JtzLpBuv1E3LFUsysBh3eiXP/AP1KBMxo+2GGbferseefBaXVjdkE1Zi84cn/l1SuVaL1QA7PrUxPOi0RVjGx2vYlCqO/k7dBO1CC1OuGilAaPyyk10H/g0KGd1Mbs+tHda2vpTwmgTDChhJjdC8OzrXXusmQFscweZU8Xe0LJP2VhXrehN9j3+m8ssxcCQ2DXO5LTR7wpctUsYYYShztvjfclSYUdRW3iDfO1qYllza43UdDdp5td70QNUqsT7mtnFsWLLfJ/gpDrFjh0aCery+yx0A0ehdzKGyj5Iyzn5Vd6qQjZPXpNFEabPayJfCy/juo7eTu0E9XsUh1r+6KYZ1d8LSkveF5azTJmj+xEBOBcwNqY3a5//dpVf6/T3NsODaYQcdl1s4uxsy1WqR+1sDKzh7ZVYlDG9bLBo8qTMrs8G+P96FvDfh/LOW9Oxt2W5j2CszGeWSI07ehJPq44imd/eQoofMJBFEabPayJOKIfkuo+1exhnWjnVapjbU+KeXbF15J/g+el1Qz7vXjHiuxEBODePjG7JbVr/rNH6TUpv+qkF7B4wZdeaeJlozdRCPWduq11optX1FnW124/b1+7Vl6p3uBRG/yGdmKX+3MgtkFerNWYXbnvFiQ/BoLRrpiCbnYr4Ive54xKh5b7iWX20LZKDML+7qFL5i09ZH48qdkYMc/gTVAoZvd1Y29LRtaq2XKRpwhE/7rZRf1gTUlqZ/xnj34FcXS3XOok0uyhTRR094Vsa53o5hV1lvW128+TZ86UGbMX/PmWqH8XlE7scn/WyP4lTmV+zA5ZQDZ71ihv9gqpz2d/6nOUjGPkXY+5fHO+qTlX3RNUAFO441x5iJ0RpH8IVmR2MTTWdxmkPkfJOIbM3nV09vTcyTOYHbKFmHsRX1m7qUBjYsTsgtjvZwcAAONgdgCAtIHZAQDSRp3MXjzSDQAA9aHvUOcjpx4OxdqF2QEAVh+YHQAgbWB2AIC0kRWzf2tqp+DtE/lnh1v1OssyOLP+0oWt4/1dg2NbL1xec3asS68DAJA4WTS7y8WRfXq18mB2AFgVrD6zT04Ux8f6lUKrxCrXKwt0s0ehtxUIs+u7SnX6W85euPmpmXJ1AABqyuoz+9Vrb3ztrbdkuVvbVolVrlcW6AaPQm8rwOwAsCpYfWZ3PS7krvwYhW7wKJSGg/07n7p88+WXP+Qizcasn3cUP764xtt1ef1c34Oi8rL3AACAGmHY7PpHoSzMmr0o2Xz24WOVaL1YrdldrYsB+PzSzYrZZcX7TRizA0DCmDJ7U9vhgeOzdTJ70Zf7O+9+uxKtF6s2e3D6JfgE1TG7o/5L0tNUzA4AiWPE7Ll8e9/k/HBPe/3MXnTk/vrrVyrRerFmZvfKHZu7fsfsAJA4Zsze3NU71Neab66r2WOhGzwKuZU8G+PpW5uNOSvttWpidgBIHCNmF6TN7EVnnO4/IF1zdjFkzD6/5D8yXfLaus9UeYIKAEmB2VX0tgAAqwuDZs/lWxvX7AAA2cGU2XP5lo7BacwOAJA8Rsyey+9t6588MT6A2QEAkseQ2TuPTJ+enT+F2QEAkseI2QWYHQAgeTA7AEDawOwAAGkDswMApA3MDgCQNjB7OeTPpladPVWnkgweAABVkyGzT00Ur179QoVrQ7roaw9UkT1VB7MDQE3JkNkrzL4ko5s9Cr1tGTA7ANSUDJm9GF/uusGj0NuWAbMDQE3JltmLMeWuGzwKpaGcPfXCYotSUsqnahfaiwPLNQEAVkjmzG4x+/Cxd9799uuvX9F3KegGj0Ju5Upc1nRkPlU32Z6zsLuz5nsp6x4AQNVkzux1GLPrky2RWffcMbtjcycZE2YHAANky+yxtF7E7ACwOjFi9ly+9fDEqZkGX+sxrtaLVZs9kD1159nFlsh8qpgdAGqAEbMLGtrsRt7PHoXS0Jk0t5+XXvLTpYbnU8XsAFADTJq95UBDm70KdINHobcFAEgKg2Zv6Z1Mm9kBAFYjBs2eb/DZGACAjIDZAQDShhGz5/Ye6B/pb8s3Y3YAgOQxY/amroGZ+aEDBcwOAJA8Rsxu0dx+ZOjEHGYHAEgeU2Z3wewAAMmD2QEA0gZmBwBIG5i9HPKnTA3mQQUAqCkZMruRdWOM5EEFAKgpGTJ73dZ6BABIlgyZvRhf7rrBo9DbAgAkRbbMXowpd93gUSgN9Tyo44tr/FV8vXV99RIAACNkzuzFRPKg2su1B/StlwAAmCJzZq/DmD0kW56byVpKYK2XAACYIltmj6X1ojmze+VunryA39USAICVkyGzx9V6sWqz63lQx7aelZKgWrv0Ev3oAADVkSGzG3k/exRKQz0P6vyS90D10pJXWS8BADBChsxeBbrBo9DbAgAkhUGz5/KtaTM7AMBqxKDZ9+wfw+wAAMljyuy55u6jU/OYHQAgeYyYPZff03p0enLsMGYHAEgeM2ZvOjg0N927jwzXAAANgBmzN/eOLJyanl3A7AAAyWPG7Pm9zS379rTsw+wAAMljxOwCzA4AkDyYHQAgbWD2csifMo2VB9VdDebyyx9iQRgAqD8ZMruRdWMqzIM6vriG1WAAICkyZPa6rfVYdFb7kjNvVAjrPgKAETJk9mJ8uesGj0JpiNkBIEGyZfZiTLnrBo9CblVantdZwlfOiSoW9XUK15xdXC9ypQaqOYk7SJQKANWRObMXa58HtSiN2ZWcqHa6JUn37ly8s5i7nVZJHrOTKBUAqiZzZq/DmL0omz2YOa+UU8kdsztJ8pxCzewkSgWAasmW2WNpvVgrs7sSX8bsUn38DgDxyJDZ42q9aMTs+myMI/plzU6iVAComgyZ3cj72aNQGsrvjSn3BDVo9qLzRnjxBJVEqQBQHRkyexXoBo9CbwsAkBSYHQAgbRgxey7fcuDY6dn5U5gdACB5DJl938HjJwe6yakEANAAmDJ7j2X2LswOANAAGDJ7a8/EydHhUcwOAJA8psx+cGzu2OBBzA4AkDxGzC7A7AAAyWPE7Ln8nua9LU1NzLMDADQAhszednhiYfhwO2YHAEgeI2a3aT08MD6XNrPLnzKtPA+qWJVX3xUX8qkCQBUYM7tDQ5vdyLoxleRBNWh28qkCQBVkyOz1XOvRFGTdA4AqyJDZi/Hlrhs8Cr2tETA7AFRBtsxejCl33eBRyK3kRHfyEr7yiu3hi/pKaVGL5vKp6ucFAOkmc2Yv1j4PqjC7knbD3qUn4ohOi1osn8EjuiFjdoCMkzmz13PMrqTKs3eFJM+LTItaXCbrXmRDzA6QcbJl9lhaL9bJ7JFpUYvLmD2yIWYHyDgZMntcrRdXbnZnqsTLa9q/86w/CV5hWtRi+dmY6IaYHSDjZMjsRt7PHoXcKvAE1d62n2cGn3lGPAiNNnvchnI+VTk2AMgCGTJ7FegGj0JvCwCQFJgdACBtYHYAgLSB2QEA0oZBs+fyLZgdACB5DJo9XyhidgCA5DFl9ly+ref4NGYHAEgeU2Zv3j82OXkCswMAJI8Rs+fyhd4T88M9ZMsDAGgAzJh935FjM8OFPBmuAQAaADNmLwyemB1uT5/Z5U+ZJpIHFQCgCsyYvan76MzCaF9XQ5vdyLoxdc6DCgBQBUbMbtFU6BucmG1os9dtrUcAgGQxZXaXhjZ7Mb7cdYNHobcFAEiKbJm9GFPuusGjkFsF12dfc3bGW8jXToE0E8h0alf21+a95KQzZd1dAFg5mTN7se55UL0UGY7TpYSlemoOO10GZgeAlZM5sycwZvfSYoRsqznwtOx6AABVkC2zx9J6EbMDwOokQ2aPq/ViHczObAwA1IAMmd3I+9mjkFtVbna/Mk9QAcAkGTJ7FegGj0JvWwXMxgCAETB7kjgzMPbo3tm2Z2bEuyEBAKoGsyeMmI2R3+QOALASMDsAQNrA7AAAaQOzAwCkDSNmz7UOjC+cnpk/hdkBAJLHmNlTmXkDAGA1Ysbsezq7e7r3YnYAgEbAiNkFmB0AIHkweznkT5mSBxUAVgsZMruRdWPIgwoAjY9Bs+fy7Q1t9rqt9QgAkCwmzd4x1NBmL8aXu27wKPS2AABJYcrsufyezqGFRjd7MabcdYNHIbcSq/jah1tc464Jc8kvAQCoNabM7rIKzF6sZx5USfEAAHUjc2av55jdy3DN01QAqC/ZMnssrRdXbHbvRzcNHn4HgHqRIbPH1XpxxWa3Ns5KOU7dfKcAALUmQ2Y38n72KORW8ph9fsnLqnFpiffPAECdyJDZq0A3eBRyKx6cAkCyYHbzjC+uIVE1ACQIZjfJ4Mx63roOAImD2QEA0gZmBwBIG5gdACBtYHYAgLSB2QEA0oYxs+/rOTo+i9kBAJLHiNlz+fa+yYWR3o6Um/3xpSes769+8U0ZvRoAQLIYMvuB4tyJnr3NaTa7pXXX45WY3V0o5vLLH6pwrRjjCfaMdwgAqwhDZt9bODozMXY0tWZ3tV652e2PocZZKMa4iI13CACrCCNmt+W+p+vIiZPpNLvQeuVmn1+6+cJii14OYJyhI91zhwt6OWQZI2bP5Qs94zPFA4V0ml0Bs0PjMNLf9blCfkgrh4xjxuz7Bsanh9ryKZ1nV1S+rNlLK/eWcuZ5JU/NdLlT8ML77vJhx0dLy0O6mZjc+m41uUQsSuMUrjm7aK9UI2oK5PUmK+wQVh3H+jp/a+/9I/z6QMOM2fccHp6fGdif0jF7qL7L7xJjdtvjS966j4Mz6z3XWxvOYpAiI4eSYE/WtFJS6sRNxefM5uuz6lV0KCrAqmD6cPsf7doy3teh7wIwY/Z8856ugeET82k2e89vvKsgdukoszHWwDwwineH22OS0MWGL33RVikp3Qz8TvzCCLNX3KGoAI3PyUMP/fX9d1ly13cBFA2ZXZBqs1/7Zt+nXu67eMVy+tH5hQrN7k7FSNve6NitYBlf2VWZiJ27gkmz8y6a1cRjB1p/cM+6Uz1t+i4AF8y+PK6+B2dGjj+9/9hS9+D87KHPvVmp2SWN2lPqYu7bMu+F9U/5SlUmT9wRtLV9drElZPLEm8kJMbuYlqmiQ+UUoDF5pnvvv2++7YkD+/RdAALMvjyuvqc/f+DhL+63mHp1/9iZ7sETo2KXTmCe3fnIkv30cmm99FTTLhfveQ888HSG+drDUvWBZ4Vmr7xDaHwud+z+n7tvfa5rj74LQAazL4+rb1frguk39otdAHXgC227frlh7cvteX0XgAJmX54y+i6zC8Ag39h73wcb1l5tjfHBZsgymH153PetR6HXBzBJf9cf5LZaWr/evF3dBRABZgdoXEb6u/58x0ZL6zd2bdb3AkSB2QEalON9HX933ycsrX/vgQ1DPOWGOGB2gEZk+nD79+9ZZ2n9H7bfOdrXqVcAKANmB2g4Tve0/cvWj1ta/9G2O8Z7WT8AYoPZARqLJw7s+49NH7O0/m9bbps5xPK8UA2YHaCBON+156d332Jp/T833frIQdYPgCrB7DEgDyrUlEvtu/9340ctrf9s4y1L+wPLMgPEwpTZm1oPDxyfTbPZK8+DKj7ir+/SqXrZFnl1gepwemBpgUbhWuuD/7dhraX1X25Y+2udzXoFgMoxYvZcvqN/cmGktzO1Zo+VBxWzQ1yuN2//wNH6rzasfaWQ0ysAxMKM2dsGxmeH29OaU6mKPKiVY9bssRZbx+wNQX/XH+/a4mrd4sv7dqgVAOJjxuyFwRMpNrsCZgdTjPZ1uh8xdflm0z16HYAqMGP2pv0DswvWX2k6za6ofFmzB9dGD0lVKi+ia6+j65tdLncry0u6zy+VVv31K5c6t3YF1ua9sPV434N2hRlvCV87DdNMIBLMnizjvR3/uP1OofX3d27S6wBUhxGzWzR3Do5MLmB2GyXrhZKq1C0Uw2rb1+GZNLw67lLv+tA+ovNSQ6+C27njdKmyCA+zJ8PM4cKPtt0htP5X9981zC8CzGHK7C7pNHtc1DG7khxDSVYnciT5A2qBNLK++VLIxEtY56rZRYWQbcyeFKd72v51i/0RU5d/unf9GOsHgFEMmj2Xb0mb2ZVsG+URrao2e+iEO2ZPGUv7W9yPmLr889bbJ3tJVA2GMWj2pq7RdJq9+cD9ykYootUyZndM7cvXyZlXmo2RZ2lK0+tuLmyvWmBWR+8cszc0z3c2/2yj/RFTl59s/tgc6wdADTBo9nz6ZmNqYXZ72594sUfii6WhukhY6j7wLAZm4Z17wNLO8mYvOg9dA09QMXvD8NlC/he+0y3+++5bHz3YqlcDWDmYvRxC6AJd6LrZAXSutT74K0nrP9/40We69+rVAIyA2cshzK5shKI3hwwyFbbo7u823Suc7nKZRNVQSzB7OTA7xOWd3dvkH4f6u76zc7Oi9dfadukNAQyC2cuh67sMenPIGkNHun+28ZaThx5yfxzt6/zLBzYoWv/Gnvv0hgBmwewAxnime6/l7i85a79M9rbLHzF1+cPcVr0VgHEwO4AxvrH3Pkvff7Fj49yhwo+33a5o/c923F3knUhQF+pk9o/c1wGQev5kkz1I/68Nt/x4422K1t/fdKdeH6BGrNvZ3nJ0KhRrF2YHqJRbtxfkt6vL/M3dd9y+vaA3AagRmB3ADEPbcrrTLb6/8eMbtrfp9QFqB2aPQc/0Y9b3i699RUavBtnk85u36lr/yYZb77t3n14ZoKZg9kqxtO56PAtm/3DfukvPbtm6vV3fZe/dvmPu8rrWiL21xuDRP9y65ZOX1wy0GujK4m83llblFfx8w9r3Nn3i3LYHtt7bqjcBqBGYvSJcrWN2b685t1aBwaMbNPvG7W261mV+etdHX9lyz233MdsO9aAKs+ea2joHp6YWTk8c7SiVt/YMjM+m0+xC63Uw+4e3Nw88e/NcnwHXrISMmN0gs9se1G3+iw1rv3f3ekvo/fc0fYwnqFBH4po9ly8cPDY3Ptx3oDgnzG4VHh5fGOuPzpanH3j1Ipy+9OnXMHv9SfboUby1eZNr81/dtebvN97xxc1bj92Tu2P7Q3pNgDoQ3+ztnQc7mvLNbUclszf1DC8c398UneFaP/AqQhmkP/r85/L9U7fsPGDtuuVB+7uCb2dLQDe7fnRk5Gco9a3kTAUEtvfde3+pmtbwkxPNoZ0HD22Vrxnos3qzW1l3CMvRcnO/jhqMUl4KQAuy1YvKL9QitNg6Ya8krPQfiNPuymvl3sa8yCe0aMNrWteqyboOpWrOrWjPuHdc7+iP7IiKUOrci1CPOfRCRcX5p3ffacl9ftvOTbwNBhqAuGYXBMze3DuycKwrnwGzP/HSlfVNfbNP//rzr37J2mV9n3v607c6lhe48lUEEXCQ68dwaZbG7J5EnFlgUa50ruAey5Oy43TPbgEphwXjlIv/FVof8TsJD9Ize3iEUpNQ7JqPePckJQApWrvb6JrOhvSPhRWw/I+O2BUaYamaOCMt5vIXSolTtAJoEEyavak7/Wbvmz1XPP3MC1e+/PHdhzYXirfvPmRtF089LddXDKLMbIQaMNzs/nBbYIlG7dwfV17yVCiLLGQ7MhilXJgxPMiSW8MidNwnKU8J0i1UxsiagsvXDDQRJd7h5JjDInSraWcUjDnqQkXHCdA4mDR7Fsbs7WOnZ556yRqzF0ZOWT8+NHrK2rZK5PqqfEMc4fgoXJoBs4fNt6gDz+DeEJvL25HBVGt2PUKp54ArS7vsfrzhcLBP1ZjRNb2QLOlbe63v7iDaaVvqx/4xOkK5T79tKWb1goiQwuLUewZIFjNmz8g8u7W99oGuZz/7xtjic90Ti1aJ9d3atkqsclFfNbszHlRmhH1pel6w3aSb3WkozZCoFXRCbS5vRwYjHcsTXLkgfbOHRti6ZUDqRw9VlmawT9WY0TWlm82z6+Z8vepHjIrQm+0Rdwst5rIXSo1THA6gQYhr9ly+Od/UbH0vDMxNDHTaP+ab3ffGjKb1vTGy2d/8nXdfffO31zX1Tp17wSqxvlvbVolVLupH+UWeUnDLxTzDJx9ZJwaPbqEkVuX5odq5TKjNw7ZDghETF/agdSKgVCVI1a3BCD/izHp7XflD6WCQ9imE9akaM7pmKWzxSEA+rnx0PULd7KExh16o0DiVEwRInPhm7zo6e3ru5BnB8b6Cvau1Z+B4St/Pro7ZP6ON2T8TGLNDPbGMrLzjpXKU2RiA1BDX7OVJudkvSvPsD43a8+yFkZB5dqgbK1SzPcMTPQsPsHrB7Msjm7135sniqafd98ZsemjQ+n7xyleU98ZAfXDnT6ImpsrjTj1FvXkUYLWD2WNz684D8vvZrW3l/ewAAMmC2QEA0gZmBwBIG3Uyu56AFQAAaoTZDNf/D99YlPw2TUFTAAAAAElFTkSuQmCC"},419:function(t,s,a){t.exports=a.p+"assets/img/wp_10.cfc9c72e.png"},513:function(t,s,a){"use strict";a.r(s);var n=a(1),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"前言"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),s("blockquote",[s("p",[t._v("B端系统的路由权限相信大家都做过，其实实现过程并不复杂，服务端返回一份路由数据，前端根据这个路由数据进行拦截 或者只挂在对应路由以此达到权限的目的。相对应的 一般还会有一个中台系统\n专用于给角色配置权限，那么久会存在一个问题，前端每次新增了路由 都需要在中台手动的添加一个路由配置，这样既费时又费力而且还容易出错。如果有一个工具能自动检索当前项目的前端路由 并生成一份可用的\n路由数据自动上报到服务端就好了，本文就手把手带你实现一个自动收集路由数据的小工具")])]),t._v(" "),s("h2",{attrs:{id:"技术选型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#技术选型"}},[t._v("#")]),t._v(" 技术选型")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),s("p",[t._v("要自动收集路由数据，那必不可少的就是对本地项目文件的检索。而我们日常用的构建工具其实就是在对本地文件做处理，首当其冲的就会想到通过构建工具来去实现这个需求。本文采用以webpack为构建工具的项目作为例子，去实现我们的需求")])]),t._v(" "),s("h2",{attrs:{id:"webpack知识科普"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack知识科普"}},[t._v("#")]),t._v(" webpack知识科普")]),t._v(" "),s("p",[t._v("因为涉及到对文件的操作，所以这里选择以插件的形式去完成，前置条件当然是要了解一下"),s("code",[t._v("webpack")]),t._v("插件啦。")]),t._v(" "),s("p",[s("code",[t._v("webpack")]),t._v("插件其实就是一个含有"),s("code",[t._v("apply")]),t._v("属性的对象，"),s("code",[t._v("webpack")]),t._v("会在初始化之后去调用注册的插件的"),s("code",[t._v("apply")]),t._v("函数，并将当前初始化的生命周期对象传入。开发者可以\n通过这个对象去订阅"),s("code",[t._v("webpack")]),t._v("的各种钩子，在这些钩子中完成对文件的改写从而改变输出结果。")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("myPlugins")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apply")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("compiler")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        \n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("p",[t._v("以上就是一个插件的雏形，其实很简单，这里我们主要需要了解一下"),s("code",[t._v("webpack")]),t._v("的钩子以及执行过程。")]),t._v(" "),s("h3",{attrs:{id:"compiler和compilation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#compiler和compilation"}},[t._v("#")]),t._v(" compiler和compilation")]),t._v(" "),s("p",[t._v("为什么要认识这两个东西呢，因为"),s("code",[t._v("webpack")]),t._v("的整个执行过程其实就是这两个对象完成的，首先在我们执行"),s("code",[t._v("build")]),t._v("命令或者"),s("code",[t._v("run")]),t._v("命令之后 "),s("code",[t._v("webpack")]),t._v("会在解析完用户自定义配置之后初始化一个"),s("code",[t._v("compiler")]),t._v("对象，\n这个"),s("code",[t._v("compiler")]),t._v("就像是"),s("code",[t._v("webpack")]),t._v("的大脑，他控制着一切"),s("code",[t._v("webpack")]),t._v("的行动，那行动由谁去完成呢？自然就是我们的"),s("code",[t._v("compilation")]),t._v("对象，他就像是手脚一样 接收到来自大脑的指令，然后去完成这个指令。")]),t._v(" "),s("p",[s("code",[t._v("compiler")]),t._v("对象在整个执行过程中只会有一个，但"),s("code",[t._v("compilation")]),t._v("对象可能会有多个。")]),t._v(" "),s("p",[t._v("在整个执行过程中如何让开发者参与到其中呢？"),s("code",[t._v("webpack")]),t._v("采用发布订阅的模式，"),s("code",[t._v("compiler")]),t._v("身上有非常多的钩子函数，并且提供了相对应的订阅方法，开发者只需要在"),s("code",[t._v("compiler")]),t._v("对象身上订阅各种钩子，"),s("code",[t._v("webpack")]),t._v("就会在\n执行到这个过程的时候去执行开发者传入的回调函数，以此来完成整个构建过程。")]),t._v(" "),s("p",[t._v("在翻阅了文档之后发现，"),s("code",[t._v("compiler")]),t._v("和"),s("code",[t._v("compilation")]),t._v("都有许许多多的钩子，那两者之间的订阅关系该如何梳理呢？换句话说，我该如何确定我要完成的事情应该订阅谁的钩子，订阅的是哪个钩子。")]),t._v(" "),s("p",[t._v("仔细观察一下会发现"),s("code",[t._v("compiler")]),t._v("的钩子都是宏观上的，也就是整个大生命周期过程中的钩子，这是因为他不负责编译，值负责任务的调度。而"),s("code",[t._v("compilation")]),t._v("的钩子则对应了非常非常多的修改输出资源的方法。")]),t._v(" "),s("p",[t._v("我们需要通过订阅"),s("code",[t._v("compiler")]),t._v("的提供"),s("code",[t._v("compilation")]),t._v("对象的钩子，然后在订阅这个"),s("code",[t._v("compilation")]),t._v("上的某个钩子来完成我们的需求")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),s("p",[t._v("这里需要注意一点东西：很多人会对"),s("code",[t._v("compiler")]),t._v("的钩子和"),s("code",[t._v("compilation")]),t._v("的钩子产生一个误解，那就是什么时候订阅 他就会什么时候触发。其实不是这样的，订阅并不等于触发，例如我们在"),s("code",[t._v("compiler")]),t._v("某个钩子中订阅"),s("code",[t._v("compilation")]),t._v("的钩子，他并不会在\n"),s("code",[t._v("compiler")]),t._v("的钩子触发后就立即触发，而是在这个钩子中去进行订阅，然后在"),s("code",[t._v("compilation")]),t._v("的钩子执行后才会执行被订阅的函数，所以订阅的顺序不对 很可能出现失效的问题。例如我们在"),s("code",[t._v("compiler")]),t._v("结束的钩子里订阅"),s("code",[t._v("compilation")]),t._v("初始化的钩子，这个时候肯定是不行的。")])]),t._v(" "),s("h2",{attrs:{id:"开始"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开始"}},[t._v("#")]),t._v(" 开始")]),t._v(" "),s("p",[t._v("对于"),s("code",[t._v("compiler")]),t._v("和"),s("code",[t._v("compilation")]),t._v("我们就粗略了解到此，下面开始正式着手去写这个插件")]),t._v(" "),s("p",[t._v("首先勾勒出一个插件的基础样子")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AnalyzeRouterPlugin")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("option")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apply")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("compiler")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" _this "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("compiler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mode "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'production'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n    \n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br")])]),s("p",[t._v("由于我们只需要再"),s("code",[t._v("build")]),t._v("的时候进行这个操作，所以这里在"),s("code",[t._v("apply")]),t._v("函数中进行了一层拦截。")]),t._v(" "),s("p",[t._v("接下来就是最重要的去订阅钩子了：由于我们需要在所有模块构建完成之后，输出到目录之前去进行收集数据，所以钩子我这里采用"),s("code",[t._v("compile")]),t._v("r的"),s("code",[t._v("compilation")]),t._v("钩子以及"),s("code",[t._v("compilation")]),t._v("的"),s("code",[t._v("finishModules")]),t._v("钩子")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("compilation")]),t._v("钩子：\n"),s("ul",[s("li",[s("code",[t._v("SyncHook")])]),t._v(" "),s("li",[s("code",[t._v("compilation")]),t._v(" 创建之后执行。")]),t._v(" "),s("li",[t._v("回调参数："),s("code",[t._v("compilation")]),t._v(", "),s("code",[t._v("compilationParams")])])])]),t._v(" "),s("li",[s("code",[t._v("finishModules")]),t._v("：\n"),s("ul",[s("li",[s("code",[t._v("AsyncSeriesHook")])]),t._v(" "),s("li",[t._v("所有模块都完成构建并且没有错误时执行。")]),t._v(" "),s("li",[t._v("回调参数："),s("code",[t._v("modules")])])])])]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AnalyzeRouterPlugin")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("option")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apply")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("compiler")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" _this "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("compiler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mode "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'production'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n      compiler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hooks"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("compilation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tap")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'AnalyzeRouterPlugin'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("compilation")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          compilation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hooks"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("finishModules"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tapAsync")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'AnalyzeRouterPlugin'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("modules"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("cb")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cb")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br")])]),s("p",[t._v("因为我这里对路由文件进行了拆分 ，目录长下面这样子")]),t._v(" "),s("img",{staticClass:"img",attrs:{src:a(417)}}),t._v(" "),s("p",[t._v("所以这里我需要搜集到所有的路由模块文件 然后进行值的匹配。")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apply")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("compiler")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" _this "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("compiler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mode "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'production'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n    compiler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hooks"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("compilation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tap")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'AnalyzeRouterPlugin'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("compilation")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      compilation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hooks"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("finishModules"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tapAsync")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'AnalyzeRouterPlugin'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("modules"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("cb")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取到所有的路由文件")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" routerModules "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" modules"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("filter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("m")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" m"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("resource "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" m"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("resource"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("startsWith")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("compilation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("context "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\\\\src\\\\router\\\\modules\\\\'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 开始解析路由文件")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" modulesData "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" _this"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("analyzeRouter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("routerModules"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 将所有模块信息输出到一个文件")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Object"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("keys")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("modulesData"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" allModulesDataString "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("modulesData"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" outputFilePath "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" _this"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fileName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 输出文件名")]),t._v("\n          compilation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("assets"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("outputFilePath"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// compilation.assets就是最终输出的内容")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("source")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" allModulesDataString"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("size")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" allModulesDataString"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length\n          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cb")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br")])]),s("p",[t._v("这里步骤其实也很简单，就是先获取到所有的路由文件，然后对他进行一个解析，最后将解析到的数据写入"),s("code",[t._v("compilation.assets")]),t._v("中。")]),t._v(" "),s("p",[t._v("下面来看看"),s("code",[t._v("analyzeRouter")]),t._v("函数")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("analyzeRouter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("routerModules")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" modulesData "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    routerModules"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("module")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("resource"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("endsWith")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'index.js'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" source "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_source"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("source")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 使用正则表达式匹配export default后面的数组")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" regex "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token regex"}},[s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("export\\s+default\\s+(.+?);")]),s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token regex-flags"}},[t._v("s")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" match "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" source"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("match")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("regex"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 清理字符串，将所有非双引号的值转换为双引号，并修复可能的语法错误")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" cleanedString "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" match "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" match"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("replace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token regex"}},[s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("([^\"'])([a-zA-Z_$][a-zA-Z_$0-9]*)\\s*:")]),s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token regex-flags"}},[t._v("g")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'$1\"$2\":'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("replace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token regex"}},[s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("'")]),s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token regex-flags"}},[t._v("g")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\"'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 将单引号转换为双引号")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" regexComponent "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token regex"}},[s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v('"component"\\s*:\\s*([^\\s,]+)')]),s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token regex-flags"}},[t._v("g")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 替换component字段的值为字符串")]),t._v("\n        cleanedString "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" cleanedString"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("replace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("regexComponent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'"component": ""\'')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 尝试解析清理后的字符串")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" data "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cleanedString"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("filterString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("list")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("Array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isArray")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("list"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v("list"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" result "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n            list"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("item")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" temp "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("label")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("item"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("label"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("path")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("item"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path\n              "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("item"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("children"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v("item"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("children"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                temp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("children "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("filterString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("item"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("children"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n              result"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("temp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" result\n          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          modulesData"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("resource"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("filterString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Parsing error:"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("Error extracting content from ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("resource"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" modulesData\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br"),s("span",{staticClass:"line-number"},[t._v("44")]),s("br")])]),s("p",[t._v("这个函数主要作用就是去解析文件内容了，因为拿到的是字符串并不能直接使用，所以这里通过一系列的正则表达式去进行内容的匹配。当然还可以通过"),s("code",[t._v("Acorn")]),t._v("这个库来解析，但是因为我这里\n需求比较简单所以就没使用了，感兴趣的同学可以了解一下。")]),t._v(" "),s("p",[t._v("整个插件其实到这里就完成了，下面我们来看一下最终效果")]),t._v(" "),s("img",{staticClass:"img",attrs:{src:a(418)}}),t._v(" "),s("p",[t._v("可以看到，构建好的文件中已经生成了一份"),s("code",[t._v("json")]),t._v("文件")]),t._v(" "),s("img",{staticClass:"img",attrs:{src:a(419)}}),t._v(" "),s("p",[t._v("文件里已经把所有的路由数据都提取出来了，并且转化成了可用的数据结构。后续我们就可以自行将他上传到服务器，这样在新增了路由之后就无需手动去中台添加路由数据啦。只需要"),s("code",[t._v("build")]),t._v("一下，路由数据就会自动上报。")]),t._v(" "),s("h2",{attrs:{id:"完整插件代码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#完整插件代码"}},[t._v("#")]),t._v(" 完整插件代码")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AnalyzeRouterPlugin")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("option")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fileName "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" option"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v("option"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fileName"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'router-modules-analyze.json'")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("analyzeRouter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("routerModules")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" modulesData "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    routerModules"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("module")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("resource"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("endsWith")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'index.js'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" source "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_source"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("source")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 使用正则表达式匹配export default后面的数组")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" regex "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token regex"}},[s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("export\\s+default\\s+(.+?);")]),s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token regex-flags"}},[t._v("s")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" match "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" source"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("match")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("regex"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 清理字符串，将所有非双引号的值转换为双引号，并修复可能的语法错误")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" cleanedString "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" match "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" match"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("replace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token regex"}},[s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("([^\"'])([a-zA-Z_$][a-zA-Z_$0-9]*)\\s*:")]),s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token regex-flags"}},[t._v("g")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'$1\"$2\":'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("replace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token regex"}},[s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("'")]),s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token regex-flags"}},[t._v("g")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\"'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 将单引号转换为双引号")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" regexComponent "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token regex"}},[s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v('"component"\\s*:\\s*([^\\s,]+)')]),s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token regex-flags"}},[t._v("g")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 替换component字段的值为字符串")]),t._v("\n        cleanedString "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" cleanedString"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("replace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("regexComponent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'"component": ""\'')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 尝试解析清理后的字符串")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" data "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cleanedString"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("filterString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("list")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("Array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isArray")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("list"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v("list"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" result "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n            list"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("item")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" temp "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("label")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("item"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("label"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("path")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("item"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path\n              "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("item"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("children"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v("item"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("children"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                temp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("children "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("filterString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("item"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("children"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n              result"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("temp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" result\n          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          modulesData"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("resource"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("filterString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Parsing error:"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("Error extracting content from ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("resource"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" modulesData\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apply")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("compiler")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" _this "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("compiler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mode "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'production'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n    compiler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hooks"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("compilation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tap")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'AnalyzeRouterPlugin'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("compilation")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      compilation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hooks"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("finishModules"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tapAsync")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'AnalyzeRouterPlugin'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("modules"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("cb")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取到所有的路由文件")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" routerModules "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" modules"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("filter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("m")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" m"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("resource "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" m"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("resource"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("startsWith")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("compilation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("context "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\\\\src\\\\router\\\\modules\\\\'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 开始解析路由文件")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" modulesData "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" _this"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("analyzeRouter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("routerModules"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 将所有模块信息输出到一个文件")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Object"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("keys")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("modulesData"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" allModulesDataString "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("modulesData"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" outputFilePath "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" _this"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fileName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 输出文件名")]),t._v("\n          compilation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("assets"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("outputFilePath"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("source")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" allModulesDataString"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("size")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" allModulesDataString"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length\n          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cb")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br"),s("span",{staticClass:"line-number"},[t._v("44")]),s("br"),s("span",{staticClass:"line-number"},[t._v("45")]),s("br"),s("span",{staticClass:"line-number"},[t._v("46")]),s("br"),s("span",{staticClass:"line-number"},[t._v("47")]),s("br"),s("span",{staticClass:"line-number"},[t._v("48")]),s("br"),s("span",{staticClass:"line-number"},[t._v("49")]),s("br"),s("span",{staticClass:"line-number"},[t._v("50")]),s("br"),s("span",{staticClass:"line-number"},[t._v("51")]),s("br"),s("span",{staticClass:"line-number"},[t._v("52")]),s("br"),s("span",{staticClass:"line-number"},[t._v("53")]),s("br"),s("span",{staticClass:"line-number"},[t._v("54")]),s("br"),s("span",{staticClass:"line-number"},[t._v("55")]),s("br"),s("span",{staticClass:"line-number"},[t._v("56")]),s("br"),s("span",{staticClass:"line-number"},[t._v("57")]),s("br"),s("span",{staticClass:"line-number"},[t._v("58")]),s("br"),s("span",{staticClass:"line-number"},[t._v("59")]),s("br"),s("span",{staticClass:"line-number"},[t._v("60")]),s("br"),s("span",{staticClass:"line-number"},[t._v("61")]),s("br"),s("span",{staticClass:"line-number"},[t._v("62")]),s("br"),s("span",{staticClass:"line-number"},[t._v("63")]),s("br"),s("span",{staticClass:"line-number"},[t._v("64")]),s("br"),s("span",{staticClass:"line-number"},[t._v("65")]),s("br"),s("span",{staticClass:"line-number"},[t._v("66")]),s("br"),s("span",{staticClass:"line-number"},[t._v("67")]),s("br"),s("span",{staticClass:"line-number"},[t._v("68")]),s("br"),s("span",{staticClass:"line-number"},[t._v("69")]),s("br"),s("span",{staticClass:"line-number"},[t._v("70")]),s("br"),s("span",{staticClass:"line-number"},[t._v("71")]),s("br"),s("span",{staticClass:"line-number"},[t._v("72")]),s("br")])]),s("h2",{attrs:{id:"结语"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#结语"}},[t._v("#")]),t._v(" 结语")]),t._v(" "),s("blockquote",[s("p",[t._v("本文描述了如何通过"),s("code",[t._v("webpack")]),t._v("插件来收集路由数据的这么一个需求场景，可以看到代码其实并不复杂，最重要的是在这个过程中我们要深入理解"),s("code",[t._v("webpack")]),t._v("的构建流程，以及"),s("code",[t._v("compiler")]),t._v("和"),s("code",[t._v("compilation")]),t._v("这两个对象\n包括"),s("code",[t._v("webpack")]),t._v("的钩子如何订阅，异步钩子和同步钩子的订阅方式以及使用方式有什么不同。掌握了这些，我们就可以各种"),s("code",[t._v("diy")]),t._v("插件去完成我们想完成的事。")])])])}),[],!1,null,null,null);s.default=e.exports}}]);