(window.webpackJsonp=window.webpackJsonp||[]).push([[104],{539:function(t,n,a){"use strict";a.r(n);var s=a(1),e=Object(s.a)({},(function(){var t=this,n=t._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h2",{attrs:{id:"前言"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),n("blockquote",[n("p",[t._v("下载vcard(.vcf)文件可以在移动端快捷保存联系人信息，相当于一个电子名片，用户只需要扫描二维码进入电子名片网页，点击保存既可弹出联系人信息弹窗快捷保存电话号码之类的信息。")])]),t._v(" "),n("h2",{attrs:{id:"vcard"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vcard"}},[t._v("#")]),t._v(" vcard")]),t._v(" "),n("p",[t._v("vcf文件其实就是对信息的一个描述，他是一个字符串格式，大体格式如下")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("    "),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("BEGIN:VCARD\\nVERSION:3.0\\nN;CHARSET=UTF-8: ; ")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("联系人姓名"),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v(";;;\\nFN;CHARSET=UTF-8: ")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("联系人姓名"),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("  \\nTITLE;CHARSET=UTF-8:")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("联系人职位，标签等"),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("\\nORG;CHARSET=UTF-8:")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("联系人公司名称"),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('\\nADR;PREF=1;Address=\\"')]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("联系人地址"),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('\\":;;')]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("联系人地址"),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("\\nTEL;TYPE=mobile:")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("联系人手机号"),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("\\nTEL;TYPE=work:")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("联系人工作号码"),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("\\nEMAIL;Email:")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("联系人邮箱地址"),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("\\nURL;TYPE=profile:")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("联系人个人网址"),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("\\nURL;TYPE=work:")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("联系人公司网址"),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("\\nEND:VCARD")]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("p",[t._v("具体的可以百度一下vcard格式，上面那份数据是针对ios系统的联系人信息格式，安卓可能会有些许字段不同，基于系统")]),t._v(" "),n("h2",{attrs:{id:"h5下载vcf"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#h5下载vcf"}},[t._v("#")]),t._v(" h5下载vcf")]),t._v(" "),n("p",[t._v("这一步其实很简单，就是将这一段数据生成一个文件流，然后用a标签下载就可以了。")]),t._v(" "),n("div",{staticClass:"language-vue line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-vue"}},[n("code",[t._v("const handleSave =()=>{\n  let file = new File([\n    `BEGIN:VCARD\\nVERSION:3.0\\nN;CHARSET=UTF-8: ; ${data[props.dataKey].full_name};;;\\nFN;CHARSET=UTF-8: ${data[props.dataKey].full_name}  \\nTITLE;CHARSET=UTF-8:${data[props.dataKey].title}\\nORG;CHARSET=UTF-8:${data[props.dataKey].COMPANY}\\nADR;PREF=1;Address=\\\"${data[props.dataKey].ADDRESS}\\\":;;${data[props.dataKey].ADDRESS}\\nTEL;TYPE=mobile:${data[props.dataKey].mobile}\\nTEL;TYPE=work:${data[props.dataKey].workTel}\\nEMAIL;Email:${data[props.dataKey].email}\\nURL;TYPE=profile:${window.location.href}\\nURL;TYPE=work:${data[props.dataKey].WEBSITE}\\nEND:VCARD`\n  ],'',{ type: \"text/vcard;charset=utf-8\" })\n  const a = document.createElement('a')\n  const href = window.URL.createObjectURL(file)\n  a.href = href\n  a.target = 'blank'\n  a.download = `${data[props.dataKey].full_name}'s Contact.vcf`\n  document.body.appendChild(a)\n  a.click()\n  document.body.removeChild(a)\n}\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br")])]),n("p",[t._v("可以用file也可以用blob。但是要注意，生成的文件类型要写成"),n("code",[t._v("text/vcard")]),t._v(",这样在ios端可以直接唤醒通讯录，非常的方便。不然的话浏览器会把他当成一个普通的文件让用户下载，下载下来之后需要手动的去分享到通讯录才能将信息带过去。")])])}),[],!1,null,null,null);n.default=e.exports}}]);