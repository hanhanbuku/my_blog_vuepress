(window.webpackJsonp=window.webpackJsonp||[]).push([[91],{508:function(s,t,n){"use strict";n.r(t);var a=n(0),r=Object(a.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"npm-版本管理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npm-版本管理"}},[s._v("#")]),s._v(" npm 版本管理")]),s._v(" "),t("ul",[t("li",[s._v("1.version类别介绍\n每个npm包中都有一个package.json文件，如果要发包的话，package.json中的version就是版本号了。\nversion字段结构为：'0.0.0-0'\n分别代表：大号.中号.小号-预发布号，对应majon.minor.patch-prerelease\n下面来看看npm中version的类别及描述。")])]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("参数")]),s._v(" "),t("th",[s._v("描述")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("major")]),s._v(" "),t("td",[s._v("如果没有预发布号，则直接升级一位大号，其他位都置为0 "),t("br"),s._v("如果有预发布号："),t("br"),s._v("1.中号和小号都为0，则不升级大号，而将预发布号删掉。即2.0.0-1变成2.0.0，这就是预发布的作用"),t("br"),s._v("2.如果中号和小号有任意一个不是0，那边会升级一位大号，其他位都置为0，清空预发布号。即 2.0.1-0变成3.0.0")])]),s._v(" "),t("tr",[t("td",[s._v("minor")]),s._v(" "),t("td",[s._v("如果没有预发布号，则升级一位中号，大号不动，小号置为空"),t("br"),s._v("如果有预发布号："),t("br"),s._v("1.如果小号为0，则不升级中号，将预发布号去掉"),t("br"),s._v("2.如果小号不为0，同理没有预发布号")])]),s._v(" "),t("tr",[t("td",[s._v("patch")]),s._v(" "),t("td",[s._v("如果没有预发布号：直接升级小号，去掉预发布号"),t("br"),s._v("如果有预发布号：去掉预发布号，其他不动")])]),s._v(" "),t("tr",[t("td",[s._v("premajor")]),s._v(" "),t("td",[s._v("直接升级大号，中号和小号置为0，增加预发布号为0")])]),s._v(" "),t("tr",[t("td",[s._v("preminor")]),s._v(" "),t("td",[s._v("直接升级中号，小号置为0，增加预发布号为0")])]),s._v(" "),t("tr",[t("td",[s._v("prepatch")]),s._v(" "),t("td",[s._v("直接升级小号，增加预发布号为0")])]),s._v(" "),t("tr",[t("td",[s._v("prerelease")]),s._v(" "),t("td",[s._v("如果没有预发布号：增加小号，增加预发布号为0"),t("br"),s._v("如果有预发布号，则升级预发布号")])])])]),s._v(" "),t("ul",[t("li",[s._v("2.version命令的使用\n执行命令"),t("code",[s._v("npm version xxx")]),s._v("可以自动更改"),t("code",[s._v("package.json")]),s._v("中的对应的位置的版本号")])]),s._v(" "),t("h2",{attrs:{id:"自动生成changelog"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#自动生成changelog"}},[s._v("#")]),s._v(" 自动生成changelog")]),s._v(" "),t("p",[s._v("如果所有的commit都符合格式，那么发布新版本时，change log 就可以用脚本自动生成。")]),s._v(" "),t("p",[s._v("conventional-changelog 就是生成 Change log 的工具。")]),s._v(" "),t("p",[s._v("先在项目中安装一下")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-D")]),s._v(" conventional-changelog-cli\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("接着配置一下脚本执行命令")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"changelog"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"conventional-changelog -p angular -i CHANGELOG.md -s"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"version:major"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"npm version major&&npm run changelog"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"version:minor"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"npm version minor&&npm run changelog"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"version:patch"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"npm version patch&&npm run changelog"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("这样每次在升级版本号的同时就会去生成对应的changelog")])])}),[],!1,null,null,null);t.default=r.exports}}]);